<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Swift: Death to Telescoping Constructors - Tony Arnold</title>
    <meta name="author" content="Tony Arnold" />
    <meta name="description" content="The blog of Tony Arnold" />
    <link rel="canonical" href="https://tonyarnold.com/2014/12/13/death-to-telescoping-constructors.html" />
    <link rel="shortcut icon" href="/favicon.gif">
    <link rel="alternate" type="application/rss+xml" title="Tony Arnold" href="https://tonyarnold.com/atom.xml" />
    <link rel="stylesheet" href="/assets/fonts/fira/fira.css">
    <link rel="stylesheet" href="/assets/css/all.css">
    <link rel="stylesheet" href="/assets/css/screen.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
</head>

<body>
    <div class="container">
        <div class="four columns sidebar">
<nav>
  <h1><a href="/">Hi.</a></h1>
  <h2>I'm <a href="/about/">Tony Arnold</a>.</h2>
  <hr>
  <ul>
  <p>Spreading code and joy.</p>
  <hr>
  <div>
    <div id="social">
      <div id="stalker">
  
  <a rel="me" title="tonyarnold on Github" href="https://github.com/tonyarnold">
    <i class="fa-brands fa-github-square"></i>
  </a>
  
  
  <a rel="me" title="Tony Arnold on Mastodon" href="https://mastodon.social/@tonyarnold">
    <i class="fa-brands fa-mastodon"></i>
  </a>
  
  
  
  
  
  
  
  
  <a title="RSS feed" id="rss" href="/atom.xml">
    <i class="fa fa-rss-square"></i>
  </a>
</div>

    </div>
  </div>
  </ul>
</nav>
</div>
        <div class="eleven columns content">
<p class="meta">
  December 13, 2014
  <a href="/">
    <i class="home fa fa-home"></i>
  </a>
</p>

<h1 class="title">

  Swift: Death to Telescoping Constructors

</h1>

<div id="post">
  <p>One of the many things about Swift that has made me happy is the introduction of default parameter values in methods. In Objective-C, it’s pretty common to see APIs that look a lot like the following code (taken from MagicalRecord):</p>

<div class="language-obj-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// NSManagedObjectContext+MagicalFinders.h</span>

<span class="k">+</span> <span class="p">(</span><span class="n">instancetype</span><span class="p">)</span><span class="nf">findFirstInContext</span><span class="p">:(</span><span class="n">NSManagedObjectContext</span> <span class="o">*</span><span class="p">)</span><span class="nv">context</span><span class="p">;</span>

<span class="k">+</span> <span class="p">(</span><span class="n">instancetype</span><span class="p">)</span><span class="nf">findFirstWithPredicate</span><span class="p">:(</span><span class="n">NSPredicate</span> <span class="o">*</span><span class="p">)</span><span class="nv">searchTerm</span>
                             <span class="nf">inContext</span><span class="p">:(</span><span class="n">NSManagedObjectContext</span> <span class="o">*</span><span class="p">)</span><span class="nv">context</span><span class="p">;</span>

<span class="k">+</span> <span class="p">(</span><span class="n">instancetype</span><span class="p">)</span><span class="nf">findFirstWithPredicate</span><span class="p">:(</span><span class="n">NSPredicate</span> <span class="o">*</span><span class="p">)</span><span class="nv">searchterm</span>
                              <span class="nf">sortedBy</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">property</span>
                             <span class="nf">ascending</span><span class="p">:(</span><span class="n">BOOL</span><span class="p">)</span><span class="nv">ascending</span>
                             <span class="nf">inContext</span><span class="p">:(</span><span class="n">NSManagedObjectContext</span> <span class="o">*</span><span class="p">)</span><span class="nv">context</span><span class="p">;</span>


<span class="c1">// NSManagedObjectContext+MagicalFinders.m</span>

<span class="k">+</span> <span class="p">(</span><span class="n">instancetype</span><span class="p">)</span><span class="nf">findFirstInContext</span><span class="p">:(</span><span class="n">NSManagedObjectContext</span> <span class="o">*</span><span class="p">)</span><span class="nv">context</span>
<span class="p">{</span>
  <span class="k">return</span> <span class="p">[</span><span class="n">self</span> <span class="nf">findFirstWithPredicate</span><span class="p">:</span><span class="nb">nil</span>
                             <span class="nl">sortedBy:</span><span class="nb">nil</span>
                            <span class="nl">inContext:</span><span class="n">context</span><span class="p">];</span>
<span class="p">}</span>

<span class="k">+</span> <span class="p">(</span><span class="n">instancetype</span><span class="p">)</span><span class="nf">findFirstWithPredicate</span><span class="p">:(</span><span class="n">NSPredicate</span> <span class="o">*</span><span class="p">)</span><span class="nv">searchTerm</span>
                             <span class="nf">inContext</span><span class="p">:(</span><span class="n">NSManagedObjectContext</span> <span class="o">*</span><span class="p">)</span><span class="nv">context</span>
<span class="p">{</span>
  <span class="k">return</span> <span class="p">[</span><span class="n">self</span> <span class="nf">findFirstWithPredicate</span><span class="p">:</span><span class="n">searchTerm</span>
                             <span class="nl">sortedBy:</span><span class="nb">nil</span>
                            <span class="nl">ascending:</span><span class="nb">YES</span>
                            <span class="nl">inContext:</span><span class="n">context</span><span class="p">];</span>
<span class="p">}</span>

<span class="k">+</span> <span class="p">(</span><span class="n">instancetype</span><span class="p">)</span><span class="nf">findFirstWithPredicate</span><span class="p">:(</span><span class="n">NSPredicate</span> <span class="o">*</span><span class="p">)</span><span class="nv">searchterm</span>
                              <span class="nf">sortedBy</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">sortedBy</span>
                             <span class="nf">ascending</span><span class="p">:(</span><span class="n">BOOL</span><span class="p">)</span><span class="nv">ascending</span>
                             <span class="nf">inContext</span><span class="p">:(</span><span class="n">NSManagedObjectContext</span> <span class="o">*</span><span class="p">)</span><span class="nv">context</span>
<span class="p">{</span>
  <span class="c1">// Actual implementation of method</span>
<span class="p">}</span>
</code></pre></div></div>

<p>This pattern is often referred to as the “telescopic pattern”, or “telescoping methods”. Basically, you implement a number of methods that each call the next, more specific method in the chain, providing default values at each stage as they become necessary. Users of the API can choose to use any of the methods, allowing for more succinct code, but only requiring a single “real” method implementation.</p>

<p>In Swift, this functionality is built into the language (hooray!). As an example, given the following method in Swift:</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">func</span> <span class="nf">findFirstWithPredicate</span><span class="p">(</span><span class="nv">predicate</span><span class="p">:</span><span class="kt">NSPredicate</span><span class="p">?</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">,</span>
                            <span class="nv">sortedBy</span><span class="p">:</span><span class="kt">String</span><span class="p">?</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">,</span>
                            <span class="nv">ascending</span><span class="p">:</span><span class="kt">Bool</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
                            <span class="n">inContext</span> <span class="nv">context</span><span class="p">:</span><span class="kt">NSManagedObjectContext</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="kt">NSManagedObject</span><span class="p">]</span> <span class="p">{</span>
  <span class="c1">// Actual implementation of method</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Users of this Swift API can choose <em>not to include any parameters that have default values</em>, ie:</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="nv">results</span> <span class="o">=</span> <span class="nf">findFirstWithPredicate</span><span class="p">(</span><span class="nv">inContext</span><span class="p">:</span><span class="n">myContext</span><span class="p">);</span>

<span class="c1">// OR</span>

<span class="k">let</span> <span class="nv">otherResults</span> <span class="o">=</span> <span class="nf">findFirstWithPredicate</span><span class="p">(</span><span class="nv">sortedBy</span><span class="p">:</span><span class="s">"someProperty"</span><span class="p">,</span>
                                          <span class="nv">inContext</span><span class="p">:</span><span class="n">myContext</span><span class="p">);</span>

<span class="c1">// OR</span>

<span class="k">let</span> <span class="nv">moreResults</span> <span class="o">=</span> <span class="nf">findFirstWithPredicate</span><span class="p">(</span><span class="nv">sortedBy</span><span class="p">:</span><span class="s">"someProperty"</span><span class="p">,</span>
                                         <span class="nv">ascending</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                                         <span class="nv">inContext</span><span class="p">:</span><span class="n">myContext</span><span class="p">);</span>

<span class="c1">// You get the gist of it!</span>
</code></pre></div></div>

<p>This allows for more succinct methods calls, without the mountain of boilerplate we would have had to write in Objective-C!</p>

  
</div>

<div id="related">
  <h3>Related Posts</h3>
  <ul class="posts">
    
    <li>
      <span>11 Jul 2018 »</span> <a href="/2018/07/11/gyb-xcode-integration.html">Integrating GYB with Xcode</a>
    </li>
    
    <li>
      <span>20 Apr 2016 »</span> <a href="/2016/04/20/xcode-build-duration.html">How to show the duration of builds in Xcode</a>
    </li>
    
    <li>
      <span>04 Feb 2015 »</span> <a href="/2015/02/04/revealution.html">Reveal 1.5</a>
    </li>
    
  </ul>
</div>

            <div class="footer">
<div class="disclaimer">
  

  <p>© Tony Arnold, 2023 — built with <a href="http://jekyllrb.com" rel="external">Jekyll</a> using the <a href="https://github.com/swanson/lagom" rel="external">Lagom theme</a>. Last updated on 27 Jul 2023.</p>
</div>
</div>
        </div>
    </div>
    

</body>

</html>
