<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Private methods in Objective-C using categories - Tony Arnold</title>
    <meta name="author" content="Tony Arnold" />
    <meta name="description" content="The blog of Tony Arnold" />
    <link rel="canonical" href="https://tonyarnold.com/2010/05/04/private-methods-in-objective-c-using-categories.html" />
    <link rel="shortcut icon" href="/favicon.gif">
    <link rel="alternate" type="application/rss+xml" title="Tony Arnold" href="https://tonyarnold.com/atom.xml" />
    <link rel="stylesheet" href="/assets/fonts/fira/fira.css">
    <link rel="stylesheet" href="/assets/css/all.css">
    <link rel="stylesheet" href="/assets/css/screen.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
</head>

<body>
    <div class="container">
        <div class="four columns sidebar">
<nav>
  <h1><a href="/">Hi.</a></h1>
  <h2>I'm <a href="/about/">Tony Arnold</a>.</h2>
  <hr>
  <ul>
  <p>Spreading code and joy.</p>
  <hr>
  <div>
    <div id="social">
      <div id="stalker">
  
  <a rel="me" title="tonyarnold on Github" href="https://github.com/tonyarnold">
    <i class="fa-brands fa-github-square"></i>
  </a>
  
  
  <a rel="me" title="Tony Arnold on Mastodon" href="https://mastodon.social/@tonyarnold">
    <i class="fa-brands fa-mastodon"></i>
  </a>
  
  
  
  
  
  
  
  
  <a title="RSS feed" id="rss" href="/atom.xml">
    <i class="fa fa-rss-square"></i>
  </a>
</div>

    </div>
  </div>
  </ul>
</nav>
</div>
        <div class="eleven columns content">
<p class="meta">
  May 04, 2010
  <a href="/">
    <i class="home fa fa-home"></i>
  </a>
</p>

<h1 class="title">

  Private methods in Objective-C using categories

</h1>

<div id="post">
  <p><img src="http://static.tonyarnold.com/danger_of_pulling_down_with_cage-1306152934.jpg" alt="Photo of a badly translated warning sign in Croatia" class="widescreen"></p>

<p>Objective-C is an incredibly flexible language, but there are a few things I don’t think it handles very elegantly - private methods are one of those things. Private methods are important when designing your classes - keeping the implementation of your methods separate to the interface that users of your class see is good practice, and lets you change the way you implement things in future without making users of your class change their code.</p>

<p>Objective-C has a great feature known as categories. In the <a href="http://cocoadevcentral.com/d/learn_objectivec/">words of Scott Stevenson</a>, “a category allows you to add methods to an existing class without subclassing it or needing to know any of the details of how it’s implemented”. My private methods are implemented using an anonymous category on each class. These are also known as “Class Extensions” and they look like this in my <code class="language-plaintext highlighter-rouge">.m</code> file:</p>

<figure class="highlight"><pre><code class="language-obj-c" data-lang="obj-c"><span class="k">@implementation</span> <span class="nc">MyGreatClass</span>

<span class="c1">// Your standard, public methods for the class go here.</span>

<span class="cp">#pragma mark - Private Methods
</span>
<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">MyGreatClass_somePrivateMethod</span>
<span class="p">{</span>
  <span class="c1">// Implement your private method here.</span>
<span class="p">}</span>

<span class="k">@end</span></code></pre></figure>

<p>You’ll notice that I preface my private methods with the name of the current class - I do this to avoid method name collisions with subclasses. It’s not strictly necessary, but it means I don’t have to think as hard when implementing subclasses of my class.</p>

<p>You can do everything you would in a normal class <strong>except</strong> declare new instance variables. I often use my class extensions to redeclare a public <code class="language-plaintext highlighter-rouge">readonly</code> property as <code class="language-plaintext highlighter-rouge">readwrite</code> within the confines of the class instance. Another common use in my code are the following two methods:</p>

<figure class="highlight"><pre><code class="language-obj-c" data-lang="obj-c"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">MyGreatClass_registerObservers</span>
<span class="p">{</span>
	<span class="c1">// …</span>
<span class="p">}</span>

<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">MyGreatClass_unregisterObservers</span><span class="p">;</span>
<span class="p">{</span>
	<span class="c1">// …</span>
<span class="p">}</span></code></pre></figure>

<p>These methods are used to set up and tear down any Key/Value Observers and bindings for the current class. I use these so often that <a href="http://github.com/tonyarnold/CocoaBotsXcodeTemplates/">I’ve put together an Xcode class template</a> so that they are included in my classes by default.</p>

<p>Please <strong>keep in mind that Objective-C has no true implementation of private methods</strong> - other classes can use these “private” methods if they know the structure of the method in question. With that said, I still believe this is a great way to keep your implementation as clean as possible.</p>

<h2 id="update">Update</h2>

<p>Both Paul and Collin make good points in the comments - you can just declare your private methods inline in your class without using an anonymous category. That will work so long as the declaration occurs before the first use of the method. In my mind, there are two good reasons to use a category:</p>

<ul>
  <li>
<strong>Readability/cleanliness</strong> - I find it a lot easier to group the declarations for my private methods together inside the category block. It’s quite readable and means I can just look at the start of the source for each of my classes to see what private methods are defined;</li>
  <li>
<strong>It’s the same when compiled</strong> - as I understand it, anonymous categories are compiled into the same space as the methods for the class they are defined for. Functionally - once the code is compiled - there shouldn’t be any difference between the two ways of defining the methods.</li>
</ul>


  
</div>

<div id="related">
  <h3>Related Posts</h3>
  <ul class="posts">
    
    <li>
      <span>11 Jul 2018 »</span> <a href="/2018/07/11/gyb-xcode-integration.html">Integrating GYB with Xcode</a>
    </li>
    
    <li>
      <span>20 Apr 2016 »</span> <a href="/2016/04/20/xcode-build-duration.html">How to show the duration of builds in Xcode</a>
    </li>
    
    <li>
      <span>04 Feb 2015 »</span> <a href="/2015/02/04/revealution.html">Reveal 1.5</a>
    </li>
    
  </ul>
</div>

            <div class="footer">
<div class="disclaimer">
  

  <p>© Tony Arnold, 2023 — built with <a href="http://jekyllrb.com" rel="external">Jekyll</a> using the <a href="https://github.com/swanson/lagom" rel="external">Lagom theme</a>. Last updated on 27 Jul 2023.</p>
</div>
</div>
        </div>
    </div>
    

</body>

</html>
